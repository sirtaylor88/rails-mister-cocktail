<div style="margin: 16px">
  <%=link_to  cocktails_path do%>
    <i class="fas fa-undo-alt" style="font-size: 24px; font-weight: bold; color: #007bff">
      Back
    </i>
  <%end%>
</div>
<hr>
<div class="container text-center">
  <h1><%= @cocktail.name %></h1>
  <div class="d-flex justify-content-around">
    <div class="container">
      <img style="width: 50%" src=<%="#{@cocktail.image_url}"%>>
    </div>
    <div class="container">
      <h3>Description</h3>
      <p><%= @cocktail.preparation %></p>
    </div>
  </div>
</div>
<hr>
<div class="container">
  <div class="row justify-content-around">
    <div class="col-4 border m-3 p-3">
      <h2>List of ingredients</h2>
      <table>
        <tbody>
          <% @cocktail.doses.each_with_index do |dose, index| %>
          <tr>
            <td><%= "#{index + 1}" %></td>
            <td><%= Ingredient.find(dose.ingredient_id).name %></td>
            <td><%= dose.description %></td>
            <td>
              <%= link_to "Remove", dose_path(dose), method: :delete, data: { confirm: "Delete this ingredient from the cocktail" } %>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>

      <%= simple_form_for [@cocktail, @dose] do |f| %>
        <%= f.input :ingredient_id, label:'Select an ingredient', as: :select2, collection: @ingredients %>
        <%= f.input :description, label: 'Description' %>
        <%= f.submit "Add an ingredient" %>
      <% end  %>
    </div>
    <div class="col-4 border m-3 p-3">
      <h2>List of reviews</h2>
      <table>
        <tbody>
          <% @cocktail.reviews.each_with_index do |review, index| %>
          <tr>
            <td><%= "#{index + 1}" %></td>
            <td><%= review.content %></td>
            <td><%= '*' * review.rating  %></td>
          </tr>
          <% end %>
        </tbody>
      </table>

      <%= simple_form_for [@cocktail, @review] do |f| %>
        <%= f.input :content, label: 'Review', error: 'Review is required' %>
        <%= f.input :rating, label: 'Rating', input_html: { min: '0', max:'5'}  %>
        <%= f.submit "Add a review" %>
      <% end %>
    </div>
  </div>
</div>


